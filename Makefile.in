# $Id: Makefile.in,v 1.6 2005/01/09 13:46:42 thamer Exp $

PREFIX		= @prefix@

CC		= @CC@
CFLAGS		= @CFLAGS@
LDFLAGS		= @LDFLAGS@
CPPFLAGS	= @CPPFLAGS@
LIBS		= @LIBS@

PROGRAMS	= ical idate ipraytime

all: $(PROGRAMS)

ical: ical.c
	@echo "==> Building ical..."
	$(CC) $(CFLAGS) $(LDFLAGS) $(LIBS) ical.c -o ical

idate: idate.c
	@echo "==> Building idate..."
	$(CC) $(CFLAGS) $(LDFLAGS) $(LIBS) idate.c -o idate

ipraytime: ipraytime.c
	@echo "==> Building ipraytime..."
	$(CC) $(CFLAGS) $(LDFLAGS) $(LIBS) ipraytime.c -o ipraytime

static: ical.c idate.c ipraytime.c
	$(CC) $(CFLAGS) $(LDFLAGS) ical.c -o ical $(LIBS)
	$(CC) $(CFLAGS) $(LDFLAGS) idate.c -o idate $(LIBS)
	$(CC) $(CFLAGS) $(LDFLAGS) ipraytime.c -o ipraytime $(LIBS)

install: all
	@echo "==> Installing compiled binaries & manpages..."
	test -d $(PREFIX)/bin \
	|| mkdir -p $(PREFIX)/bin \
        || exit 1;
	cp ical $(PREFIX)/bin
	cp idate $(PREFIX)/bin
	cp ipraytime $(PREFIX)/bin
	cp ireminder $(PREFIX)/bin
	test -d $(PREFIX)/man/man1 \
	|| mkdir -p $(PREFIX)/man/man1\
	|| exit 1;
	cp doc/ical.1 $(PREFIX)/man/man1
	cp doc/idate.1 $(PREFIX)/man/man1
	cp doc/ipraytime.1 $(PREFIX)/man/man1
	cp doc/ireminder.1 $(PREFIX)/man/man1


debinstall: all
	@echo "==> Installing compiled binaries & manpages..."
	test -d $(PREFIX)/bin \
	|| mkdir -p $(PREFIX)/bin \
        || exit 1;
	cp ical $(PREFIX)/bin
	cp idate $(PREFIX)/bin
	cp ipraytime $(PREFIX)/bin
	cp ireminder $(PREFIX)/bin


uninstall:
	@echo "==> Uninstalling ITL-tools various components..."
	rm -f $(PREFIX)/bin/ical $(PREFIX)/man/man1/ical.1
	rm -f $(PREFIX)/bin/idate $(PREFIX)/man/man1/idate.1
	rm -f $(PREFIX)/bin/ipraytime $(PREFIX)/man/man1/ipraytime.1
	rm -f $(PREFIX)/bin/ireminder $(PREFIX)/man/man1/ireminder.1
clean:
	rm -f *.o *~ ical idate ipraytime

distclean: autogen.sh clean
	fakeroot $(MAKE) -k -f debian/rules clean
	rm -f configure-stamp build-arch-stamp
	./autogen.sh clean
